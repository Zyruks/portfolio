---
import { cn } from '@common';
import Tag from './Tag/Tag.astro';

interface Props {
  title: string;
  body: string;
  href: string;
  class?: string;
  tags: string[];
  date: string;
  subTitle?: string;
}

const { href, title, body, class: className, tags, date, subTitle } = Astro.props;

const classes = {
  container: cn(
    'w-full rounded-2xl border-2 border-gray-900 hover:border-gray-700',
    'bg-gray-900 hover:bg-gray-800',
    'transition-all duration-300',
    'shadow-sm shadow-transparent hover:shadow-md hover:shadow-slate-950',
    'group',
    className
  ),
  date: cn(
    'whitespace-nowrap text-gray-400 group-hover:text-gray-200 transition-colors duration-500'
  ),
  title: cn('text-lg font-bold text-gray-100 flex gap-4 items-center'),
  subtitle: cn('mt-2 block text-gray-400 group-hover:text-gray-300 transition-colors duration-500'),
  body: cn('mt-2 text-gray-400'),
  tagContainer: cn('col-start-2 col-end-4 flex flex-wrap gap-4'),
};
---

<article class={classes.container}>
  {
    href === '' ? (
      <div class="flex flex-col gap-2 p-4 lg:grid lg:grid-cols-[20%,1fr] lg:gap-10">
        <span class={classes.date}>{date}</span>
        <div>
          <h2 class={classes.title}>{title}</h2>
          <span class={classes.subtitle}>{subTitle}</span>
          <p class={classes.body}>{body}</p>
        </div>
        <div class={classes.tagContainer}>
          {tags.map((tag) => (
            <Tag>{tag}</Tag>
          ))}
        </div>
      </div>
    ) : (
      <a href={href} class="flex flex-col gap-2 p-4 lg:grid lg:grid-cols-[20%,1fr] lg:gap-10">
        <span class={classes.date}>{date}</span>
        <div>
          <h2 class={classes.title}>{title}</h2>
          <span class={classes.subtitle}>{subTitle}</span>
          <p class={classes.body}>{body}</p>
        </div>
        <div class={classes.tagContainer}>
          {tags.map((tag) => (
            <Tag>{tag}</Tag>
          ))}
        </div>
      </a>
    )
  }
</article>
